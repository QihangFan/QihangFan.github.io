<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <title>Exhifition</title>
</head>
<body>
    <div id="menu" class="flex-container" >
        <div>
            <img class="Icon" src="/Materials/Icon/Home.png" alt="Home" onclick="location.href='/index.html';">
        </div>
        <div>
            <img class="Icon" src="/Materials/Icon/Info.png" alt="Info">
        </div>
        <div>
            <img class="Icon" src="/Materials/Icon/Replay.png" alt="Replay">
        </div>
        <div>
            <img class="Icon" src="/Materials/Icon/Menu.png" alt="Menu">
        </div>
    </div>

    <div id="rotateButton_div_exhifition" class="rotateButton_div" >
        <div>
            <img class="rotateButton" src="/Materials/Icon/RotateButton.png" alt="Rotate" onclick="videoPlay()">
        </div>
    </div>

    <div id="Exhifitionsolo_div" class="fullScreenVideo" >
        <video id="ExhifitionSolo" class="pageSolo" width=100% height=100% autoplay muted>
            <source src="/Materials/Video/Exhifition_isoFull.mp4" type="video/mp4">
            <source src="/Materials/Video/Exhifition_isoFull.mp4" type="video/ogg">
            Your browser does not support the video tag.
        </video>
    </div>
</body>
</html>

<script type="text/javascript">
    const ExhifitionSolo = document.getElementById("ExhifitionSolo");
    var pausePoint = [5,11,13],
        pauseIndex = 0,
        currentStopTime = pausePoint[pauseIndex];

    var videoTracker = setInterval(() => {
        checkTime();
        console.log(ExhifitionSolo.currentTime);
        console.log(currentStopTime);

        ExhifitionSolo.addEventListener('ended', (event) => {
            videoReset();
            console.log("videoReset");
            ExhifitionSolo.play();
        })
    }, 20)

    function checkTime() {
        if (ExhifitionSolo.currentTime >= currentStopTime) {
            ExhifitionSolo.pause();
            if (pausePoint.length > ++pauseIndex) {
                currentStopTime = pausePoint[pauseIndex]
            }
        }
    }

    function videoPlay(){
        ExhifitionSolo.play();
    }

    function videoReset(){
        pauseIndex = 0
        currentStopTime = pausePoint[pauseIndex]
    }
</script>